<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <title>Homework 3.1</title>
</head>
<body>

<main role="main" class="container">
    <div class="jumbotron">
        <h1>Homework 3.1</h1>
        <p class="lead">Type to load new post</p>
        <a class="btn btn-lg btn-primary" onclick="getNextMessage()" role="button">Load</a>
    </div>

    <div class="list-group mt-3" id="messagesList">
    </div>

</main>


<script>
    let postsCount = 0;

    async function getNextMessage() {
        const newPost = await getPost(postsCount+1);
        const divElement = document.getElementById("messagesList");
        const aElement = generatePostElement(newPost)
        divElement.appendChild(aElement);
        postsCount++;
    }

    function generatePostElement(post) {
        const h5Element = document.createElement("h5");
        h5Element.appendChild(document.createTextNode(`${post.id}. ${post.title}`));
        const divElement = document.createElement("div");
        divElement.appendChild(h5Element);
        const pElement = document.createElement("p");
        pElement.className = "mb-1";
        pElement.appendChild(document.createTextNode(post.body));
        const aElement = document.createElement("a");
        aElement.className = "list-group-item list-group-item-action";
        aElement.appendChild(divElement);
        aElement.appendChild(pElement);
        return aElement;
    }

    async function getPost(id)
    {
        const url = `https://jsonplaceholder.typicode.com/posts/${id}`
        let response = await fetch(url);
        return await response.json();
    }
</script>

</body>
</html>